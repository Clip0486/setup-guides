# 2. Git 버전 관리


## 큰 그림

작업 디렉토리(working directory), 스테이지(stage), 저장소(repository)가 있습니다.

작업 디렉토리는 버전 관리의 대상이 위치하는 공간입니다.

즉, 컴퓨터의 작업 폴더라고 생각하면 됩니다.

작업 폴더에서 코드를 짜거나 수정하면

이를 스테이지에 올리고, 저장소로 커밋(commit)할 수 있습니다.

그리고 원격 저장소가 연결되어 있다면 push하여 GitHub와 동기화할 수 있습니다.  

(원격 저장소(remote repository)는 GitHub 웹사이트입니다.)



## .gitignore

.gitignore

(확장자 없음)

커밋하고 싶지 않은 파일의 리스트를 적은 파일입니다.

.gitignore 파일을 만든 후, 

무시하고 싶은 파일 혹은 폴더를 작성하면 됩니다.

예를 들어 아래와 같습니다.

.gitignore

ignore.txt
ignore/

이렇게 수정하면 파일과 폴더가 보이지 않습니다.

## 릴리스

개발한 소프트웨어에 버전을 붙여 사용자에게 공개하는 것이 릴리스(release)입니다.

SourceTree에서는 태그를 붙인다고 합니다.

커밋에 태그를 눌러 v1.0.0 등의 이름을 붙일 수 있습니다.

* 첫 번째 숫자는 Major 버전입니다. 새롭게 내놓은 버전이 기존 버전과 호환되지 않을 정도로 큰 변화가 있을 때 증가

* 두 번째 숫자는 Minor 버전입니다. 새로운 기능을 추가했을 때 증가

* 세 번째 숫자는 Patch 버전입니다. 기존 버전과 문제없이 호환되며 버그를 수정한 정도의 작은 변화가 있을 때 증가

## 커밋 되돌리기

revert, reset이 있습니다.

### revert

1, 2, 3, 4, 5 ← 다섯 개의 버전이 있습니다.

이때 네 번째 버전으로 revert 한다면, 

네 번째 버전은 '5' 다음의 새로운 버전으로 커밋됩니다.

방법. 

'5' 버전 우클릭, 커밋 되돌리기

### reset 

되돌아갈 버전의 시점으로 완전하게 되돌아가는 방식입니다.

soft, mixed, hard reset이 있습니다.

soft reset은 커밋했다는 사실만 되돌립니다. 

mixed reset은 스테이지와 커밋을 되돌립니다.

hard reset은 작업 디렉토리 내 변경 사항까지 통째로 되돌립니다.

방법. 

되돌아갈 버전 우클릭 → 이 커밋까지 현재 브랜치 초기화

## 스태시

스태시(stash)는 임시 저장 공간입니다.

임시 저장할 사항이 있다면 커밋을 스태시에 저장하여 보관하세요.


## 브랜치

브랜치(branch)는 버전의 분기입니다.

아래와 같은 순서로 진행됩니다.

1. 브랜치를 나눈다.

2. 각자의 브랜치에서 작업한다.

3. (필요한 경우) 나눈 브랜치를 합친다.

예를 들어 새로운 기능으로 메뉴 파트를 개발하기 위해 브랜치를 나눈다면

'feature/menu' 브랜치를 나누어 개발한 후 합칩니다.

새로운 기능 → feature/menu

릴리스 준비 → release/2.3.0

핫픽스 → hotfix/login 

이런 식으로 브랜치를 나누어 작업합니다.


## HEAD, checkout

HEAD는 현재 작업 중인 브랜치의 최신 커밋

checkout은 특정 브랜치에서 작업할 수 있도록 작업 환경을 바꾸는 것


## 브랜치 병합

브랜치 병합(merge)는 브랜치를 하나로 통합하는 것입니다.

수정 사항에 겹치는 부분이 없다면 바로 병합되지만

겹친다면 충돌이 생길 수 있습니다.

## 충돌 해결

    <<<<<<< HEAD

    master

    ========

    sub-branch

    >>>>>>> sub-branch

master는 현재 체크아웃한 브랜치이고, 

sub-branch는 병합하려는 브랜치입니다.

<<<, ===, >>> 기호들은 어떤 내용을 선택할 지 고르는 부분입니다.

'내것'을 이용해 해결 → master 브랜치를 선택

'저장소'것을 사용해 해결 → sub-branch 브랜치를 선택

## 브랜치 재배치

브랜치 재배치(rebase)

    1, 2, 3, 4, 5 
    
       └ 1, 2

이렇게 '2'에서 브랜치를 만들었을 때, 

브랜치의 기준 점을 '5'로 바꾸고 싶을 때 사용합니다.

    1, 2, 3, 4, 5

                └ 1, 2

이런 식으로 바꿀 수 있습니다.

